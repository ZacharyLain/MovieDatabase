CREATE TABLE category (
  cat_id INT PRIMARY KEY,
  cat_name VARCHAR(100)
);

CREATE TABLE rating (
  rating_id INT PRIMARY KEY,
  rating_name VARCHAR(50)
);

CREATE TABLE movie (
  m_id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  m_title VARCHAR(255),
  m_date INT, -- Adjusted to INT for the year
  m_length INT,
  cat_id INT,
  rating_id INT,
  FOREIGN KEY (cat_id) REFERENCES category(cat_id),
  FOREIGN KEY (rating_id) REFERENCES rating(rating_id)
);

-- Inserting sample data
-- Categories
INSERT INTO category VALUES (1, 'Action');
INSERT INTO category VALUES (2, 'Animation');
INSERT INTO category VALUES (3, 'Comedy');
INSERT INTO category VALUES (4, 'Drama');
INSERT INTO category VALUES (5, 'Family');
INSERT INTO category VALUES (6, 'Horror');
INSERT INTO category VALUES (7, 'Romance');
INSERT INTO category VALUES (8, 'Fantasy');

-- Ratings
INSERT INTO rating VALUES (1, 'G');
INSERT INTO rating VALUES (2, 'R');
INSERT INTO rating VALUES (3, 'PG');
INSERT INTO rating VALUES (4, 'PG-13');

-- Movies with year only
INSERT INTO movie (m_title, m_date, m_length, cat_id, rating_id) VALUES ('The Shawshank Redemption', 1994, 142, 1, 3);
INSERT INTO movie (m_title, m_date, m_length, cat_id, rating_id) VALUES ('The Godfather', 1972, 175, 1, 3);
INSERT INTO movie (m_title, m_date, m_length, cat_id, rating_id) VALUES ('The Dark Knight', 2008, 152, 1, 2);
INSERT INTO movie (m_title, m_date, m_length, cat_id, rating_id) VALUES ('Life is Beautiful', 1997, 116, 2, 1);
INSERT INTO movie (m_title, m_date, m_length, cat_id, rating_id) VALUES ('Psycho', 1960, 109, 3, 3);
INSERT INTO movie (m_title, m_date, m_length, cat_id, rating_id) VALUES ('R-Rated Fantasy', 1994, 88, 8, 2);

-- reset database
delete from movie;
alter table movie modify m_id generated always as identity restart start with 1;

